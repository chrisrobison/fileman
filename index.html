<!DOCTYPE html>
<html lang="en" dir="ltr">
<meta name="viewport" content="width=device-width, initial-scale=1">
<head>
    <meta charset="utf-8">
    <title></title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        * { box-sizing: border-box; }
        body {
            font-family: "Lexend", "Helvetica Neue", "Helvetica", sans-serif;
            margin: 0;
            padding: 0;
            font-size: 14px;
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100vw;
            align-items: center;
            justify-content: center;
            background-color:#fff;
            overflow: hidden;
        }

        header {
            background-color: #d8d8d8;
            color: #000;
            height: 7vh;
            width: 100vw;
            display: flex;
            flex-direction: row;            
            align-items: center;
            justify-content: space-between;
            padding: 0 1rem;
        }
        h1 {
            margin:0;
            padding:0;
        }
        main {
            background-color: #fff;
            color: #000;
            display: flex;
            flex-direction: row;
            align-items: flex-start;
            justify-content: space-between;
        }

        footer {
            background-color: #666;
            color: #eee;
            height: 0vh;
        }
        ul {
            margin: 0;
            padding: 0;
            width: 100%;
        }
        li {
            margin: 0;
            padding-left:0.5rem;
            display: flex;
            flex-direction: row;
            white-space: nowrap;
            width: 100%;
        }
        a:hover {
            background: #05c;
            color: #fff;
            border: 1px dashed #fff;
        }
        a {
            transition: all 200ms linear;
            display: inline-block;
            width: 100%;
            border: 1px dashed #fff0;
        }
        img.icon {
            height: 24px;
        }
        img.folder {
            width: 26px;
        }
        div#left {
          width: 24vw;
          height: 93vh;
          overflow: scroll;
        }
        div#handle {
            width: 1vw;
            background-color: #ddd;
            border-left: 2px solid #fff;
            border-right: 2px solid #333;
            height: 93vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: ew-resize;
        }
        div#handle:hover {
            background-color:#eee;
        }
        div#right {
          width: 75vw;
            background:#999;
                height:93vh;

        }

        a {
          text-decoration: none;
          color: #222;
          display: flex;
          width: 100%;
          justify-content: flex-start;
          align-content: center;
          align-items: center;
        }
        span.icon {
          display: inline-block;
          width: 2.5vw;
          text-align: center;
        }
        .noselect * {
            user-select: none;
        }
        .resizing {
            cursor: ew-resize;
        }
        li {
            transition: all 200ms linear;
        }
        .children { height: 2rem; overflow:hidden; }
        .open { height: min-content; }
        #viewer {
            height:93vh;
            width: 100%;
        }
        ul {
            transition: all 200ms linear;
            }
        li > ul {
            height: 0px;
            overflow: hidden;
        }
        li.open > ul {
            height: min-content;
        }
        button {
            border: 1px solid #c0c0c0;
            border-radius: 0.5rem;
            background-color: #eaeaea;
            transition: all 150ms linear;
            width: 44px;
            height: 40px;
            display: inline-block;
            background-size: contain;
            background-repeat: no-repeat;
            background-size: 28px 28px;
            background-position: 6px 6px;
        }
        button:hover {
            border: 1px solid #a0a0a0;
            background-color: #fffafa;
            transform: scale(1.1);
        }
        .new-folder {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 64 64' stroke-width='3' stroke='%23666' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3C/defs%3E%3Cpath d='M41.64,50.37h-32a2,2,0,0,1-2-2V15.63a2,2,0,0,1,2-2H23.32L28.75,20H54.39a2,2,0,0,1,2,2V37.33' style=''%3E%3C/path%3E%3Ccircle cx='50.24' cy='45.23' r='10.01' stroke-linecap='round' style='stroke: rgb(58, 58, 58);'%3E%3C/circle%3E%3Cline x1='50.24' y1='39.76' x2='50.24' y2='50.71' style='stroke: rgb(0, 0, 0);'%3E%3C/line%3E%3Cline x1='44.76' y1='45.23' x2='55.72' y2='45.23' style='stroke: rgb(0, 0, 0);'%3E%3C/line%3E%3C/svg%3E");
            background-size: 28px 28px;
            background-position: 6px 4px;
        }
        .btn {
            background-size: 24px 24px;
            background-repeat: no-repeat;
            background-position: center center;
            width: 44px;
            height: 40px;
            display: inline-block;
            border-radius: 0.5rem;
            transition: all 200ms linear;
            background-color: #eaeaea;
            border: 1px solid #c0c0c0;
        }
        .btn-upload {
            background-image: url("data:image/svg+xml,%0A%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath opacity='0.5' fill-rule='evenodd' clip-rule='evenodd' d='M3 14.25C3.41421 14.25 3.75 14.5858 3.75 15C3.75 16.4354 3.75159 17.4365 3.85315 18.1919C3.9518 18.9257 4.13225 19.3142 4.40901 19.591C4.68577 19.8678 5.07435 20.0482 5.80812 20.1469C6.56347 20.2484 7.56459 20.25 9 20.25H15C16.4354 20.25 17.4365 20.2484 18.1919 20.1469C18.9257 20.0482 19.3142 19.8678 19.591 19.591C19.8678 19.3142 20.0482 18.9257 20.1469 18.1919C20.2484 17.4365 20.25 16.4354 20.25 15C20.25 14.5858 20.5858 14.25 21 14.25C21.4142 14.25 21.75 14.5858 21.75 15V15.0549C21.75 16.4225 21.75 17.5248 21.6335 18.3918C21.5125 19.2919 21.2536 20.0497 20.6517 20.6516C20.0497 21.2536 19.2919 21.5125 18.3918 21.6335C17.5248 21.75 16.4225 21.75 15.0549 21.75H8.94513C7.57754 21.75 6.47522 21.75 5.60825 21.6335C4.70814 21.5125 3.95027 21.2536 3.34835 20.6517C2.74643 20.0497 2.48754 19.2919 2.36652 18.3918C2.24996 17.5248 2.24998 16.4225 2.25 15.0549C2.25 15.0366 2.25 15.0183 2.25 15C2.25 14.5858 2.58579 14.25 3 14.25Z' fill='currentColor'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M12 2.25C12.2106 2.25 12.4114 2.33852 12.5535 2.49392L16.5535 6.86892C16.833 7.17462 16.8118 7.64902 16.5061 7.92852C16.2004 8.20802 15.726 8.18678 15.4465 7.88108L12.75 4.9318V16C12.75 16.4142 12.4142 16.75 12 16.75C11.5858 16.75 11.25 16.4142 11.25 16V4.9318L8.55353 7.88108C8.27403 8.18678 7.79963 8.20802 7.49393 7.92852C7.18823 7.64902 7.16698 7.17462 7.44648 6.86892L11.4465 2.49392C11.5886 2.33852 11.7894 2.25 12 2.25Z' fill='currentColor'/%3E%3C/svg%3E%0A");
        }
        .btn-download {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath opacity='0.5' fill-rule='evenodd' clip-rule='evenodd' d='M3 14.25C3.41421 14.25 3.75 14.5858 3.75 15C3.75 16.4354 3.75159 17.4365 3.85315 18.1919C3.9518 18.9257 4.13225 19.3142 4.40901 19.591C4.68577 19.8678 5.07435 20.0482 5.80812 20.1469C6.56347 20.2484 7.56459 20.25 9 20.25H15C16.4354 20.25 17.4365 20.2484 18.1919 20.1469C18.9257 20.0482 19.3142 19.8678 19.591 19.591C19.8678 19.3142 20.0482 18.9257 20.1469 18.1919C20.2484 17.4365 20.25 16.4354 20.25 15C20.25 14.5858 20.5858 14.25 21 14.25C21.4142 14.25 21.75 14.5858 21.75 15V15.0549C21.75 16.4225 21.75 17.5248 21.6335 18.3918C21.5125 19.2919 21.2536 20.0497 20.6517 20.6516C20.0497 21.2536 19.2919 21.5125 18.3918 21.6335C17.5248 21.75 16.4225 21.75 15.0549 21.75H8.94513C7.57754 21.75 6.47522 21.75 5.60825 21.6335C4.70814 21.5125 3.95027 21.2536 3.34835 20.6517C2.74643 20.0497 2.48754 19.2919 2.36652 18.3918C2.24996 17.5248 2.24998 16.4225 2.25 15.0549C2.25 15.0366 2.25 15.0183 2.25 15C2.25 14.5858 2.58579 14.25 3 14.25Z' fill='currentColor'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M12 16.75C12.2106 16.75 12.4114 16.6615 12.5535 16.5061L16.5535 12.1311C16.833 11.8254 16.8118 11.351 16.5061 11.0715C16.2004 10.792 15.726 10.8132 15.4465 11.1189L12.75 14.0682V3C12.75 2.58579 12.4142 2.25 12 2.25C11.5858 2.25 11.25 2.58579 11.25 3V14.0682L8.55353 11.1189C8.27403 10.8132 7.79963 10.792 7.49393 11.0715C7.18823 11.351 7.16698 11.8254 7.44648 12.1311L11.4465 16.5061C11.5886 16.6615 11.7894 16.75 12 16.75Z' fill='currentColor'/%3E%3C/svg%3E");
            background-size: 24px 24px;
        }
        .btn-trash {
            /* background-image: url("data:image/svg+xml,%3Csvg fill='%23666' version='1.1' id='Capa_1' viewBox='0 0 152.136 199.138' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3C/defs%3E%3Cg style='' transform='matrix(0.427967, 0, 0, 0.427967, -23.500951, 0)'%3E%3Cpath d='M372.811,51.002h-59.908V36.566C312.902,16.404,296.499,0,276.335,0h-87.356c-20.163,0-36.567,16.404-36.567,36.566v14.436 H92.5c-20.726,0-37.587,16.861-37.587,37.587v38.91c0,8.284,6.716,15,15,15h7.728v307.812c0,8.284,6.716,15,15,15H372.67 c8.284,0,15-6.716,15-15V142.499h7.728c8.284,0,15-6.716,15-15v-38.91C410.397,67.863,393.536,51.002,372.811,51.002z M182.412,36.566c0-3.621,2.946-6.566,6.567-6.566h87.356c3.621,0,6.567,2.946,6.567,6.566v14.436h-100.49V36.566z M84.914,88.589 c0-4.184,3.403-7.587,7.587-7.587h280.31c4.184,0,7.587,3.403,7.587,7.587v23.91H84.914V88.589z M357.67,435.311H107.641V142.499 H357.67V435.311z'%3E%3C/path%3E%3Cpath d='M137.41,413.485c5.523,0,10-4.477,10-10V166.497c0-5.523-4.477-10-10-10s-10,4.477-10,10v236.988 C127.41,409.008,131.887,413.485,137.41,413.485z'%3E%3C/path%3E%3Cpath d='M200.907,413.485c5.523,0,10-4.477,10-10V166.497c0-5.523-4.477-10-10-10s-10,4.477-10,10v236.988 C190.907,409.008,195.384,413.485,200.907,413.485z'%3E%3C/path%3E%3Cpath d='M264.404,413.485c5.523,0,10-4.477,10-10V166.497c0-5.523-4.477-10-10-10s-10,4.477-10,10v236.988 C254.404,409.008,258.881,413.485,264.404,413.485z'%3E%3C/path%3E%3Cpath d='M327.901,413.485c5.523,0,10-4.477,10-10V166.497c0-5.523-4.477-10-10-10s-10,4.477-10,10v236.988 C317.901,409.008,322.378,413.485,327.901,413.485z'%3E%3C/path%3E%3C/g%3E%3C/svg%3E");*/
            background-image: url("img/ui/trash.svg");
            background-size: 24px 24px;
        }
        .btn-copy {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 32 32' version='1.1' style='filter:brightness(2);' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='icomoon-ignore'%3E%3C/g%3E%3Cpath d='M27.845 7.385l-5.384-5.384h-11.845v4.307h-6.461v23.69h17.229v-4.307h6.461v-18.306zM22.461 3.524l3.861 3.861h-3.861v-3.861zM5.232 28.922v-21.537h9.692v5.384h5.384v16.153h-15.076zM16 7.831l3.861 3.861h-3.861v-3.861zM21.384 24.615v-12.922l-5.384-5.384h-4.307v-3.231h9.692v5.384h5.384v16.153h-5.384z' fill='currentColor'%3E%3C/path%3E%3C/svg%3E");
        }
        .btn-paste {
            background-image: url("data:image/svg+xml,%0A%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M3 21h5v-1H4V4h2v2h10V4h2v3h.4a.989.989 0 0 1 .6.221V3h-3V2h-3a2 2 0 0 0-4 0H6v1H3zM7 3h3V1.615A.615.615 0 0 1 10.614 1h.771a.615.615 0 0 1 .615.615V3h3v2H7zm4 14h9v1h-9zM9 8v16h13V11.6L18.4 8zm12 15H10V9h7v4h4zm0-11h-3V9h.31L21 11.69zm-10 2h9v1h-9zm0 6h7v1h-7z'/%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3C/svg%3E%0A");
            opacity: 0.75;
        }
        .btn-compress {
            /*background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 32 32' style='filter:grayscale(1)' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:bx='https://boxy-svg.com'%3E%3Cdefs%3E%3CradialGradient id='a' cx='-428.363' cy='-337.616' r='0.076' gradientTransform='matrix(22.426, -0.918, 0.944, 23.053, 9940.275, 7417.533)' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0' stop-color='%23ffffff'%3E%3C/stop%3E%3Cstop offset='1' stop-color='%2341c3f3'%3E%3C/stop%3E%3C/radialGradient%3E%3ClinearGradient id='b' x1='-414.07' y1='-323.688' x2='-413.475' y2='-323.688' gradientTransform='translate(3599.15 2562.224) rotate(-2.754) scale(8.352)' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0' stop-color='%233dc2f3'%3E%3C/stop%3E%3Cstop offset='1' stop-color='%23ffffff'%3E%3C/stop%3E%3C/linearGradient%3E%3ClinearGradient id='c' x1='-466.763' y1='-351.799' x2='-466.168' y2='-351.799' gradientTransform='translate(-3224.585 -2139.318) rotate(176.688) scale(6.683)' xlink:href='%23b'%3E%3C/linearGradient%3E%3ClinearGradient id='d' x1='-515.182' y1='-375.873' x2='-514.587' y2='-375.873' gradientTransform='matrix(-2.607, 0.014, -0.014, -2.607, -1327.883, -959.089)' xlink:href='%23b'%3E%3C/linearGradient%3E%3ClinearGradient id='e' x1='-413.465' y1='-322.372' x2='-412.869' y2='-322.372' gradientTransform='translate(3557.82 2614.61) rotate(-1.63) scale(8.403)' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0' stop-color='%230995dd'%3E%3C/stop%3E%3Cstop offset='1' stop-color='%23ffffff'%3E%3C/stop%3E%3C/linearGradient%3E%3ClinearGradient id='f' x1='-515.182' y1='-373.034' x2='-514.587' y2='-373.034' gradientTransform='matrix(-2.607, 0.014, -0.014, -2.607, -1327.785, -940.81)' xlink:href='%23b'%3E%3C/linearGradient%3E%3ClinearGradient id='g' x1='-415.664' y1='-321.968' x2='-415.069' y2='-321.968' gradientTransform='translate(3992.128 2325.757) rotate(-7.749) scale(8.752)' xlink:href='%23e'%3E%3C/linearGradient%3E%3CradialGradient id='h' cx='-435.908' cy='-337.858' r='0.076' gradientTransform='matrix(22.426, -0.918, 0.944, 23.053, 10123.552, 7416.068)' xlink:href='%23a'%3E%3C/radialGradient%3E%3ClinearGradient id='i' x1='-397.199' y1='-317.443' x2='-396.604' y2='-317.443' gradientTransform='translate(1942.918 1600.128) rotate(0.719) scale(4.876)' xlink:href='%23b'%3E%3C/linearGradient%3E%3Cfilter id='filter-0' primitiveUnits='objectBoundingBox' bx:pinned='true'%3E%3C/filter%3E%3C/defs%3E%3Ctitle%3Efile_type_zip2%3C/title%3E%3Cpath d='M9.832,2l7.415.053a2,2,0,0,1,2.054.936l.67.819h5.672c.5.032.8.175.949.446A2.8,2.8,0,0,1,26.684,5.3l.019.913c.008,1.534-.388,1.533-1.009,1.523l-1.31.017,0,11.741a8.05,8.05,0,0,1,.846.019c.621.011,1.19.005,1.191,1.366-.009.224-.017.45-.01.621a2.2,2.2,0,0,0,0,.569c-.032.5-.07.83-.3,1.047-.18.231-.487.312-.988.28-.277-.024-.516.021-.741.012l-.016,2.207c.105.031.225.007.33.039.156.045.329.04.419.121a1.43,1.43,0,0,1,1.124,1.4l1.952.113a.587.587,0,0,1,.227-.388.754.754,0,0,1,.524-.245l.053.015a.9.9,0,0,1,.79.8l-.015.053.012.741a.942.942,0,0,1-.286.6,1.194,1.194,0,0,1-.577.229.753.753,0,0,1-.546-.271.425.425,0,0,1-.148-.271l-2.082.134a1.6,1.6,0,0,1-.452.777,2.156,2.156,0,0,1-1.513.525l-2.9.011a2.421,2.421,0,0,1-1.585-.4,1.483,1.483,0,0,1-.482-.877l-3.2-.133a.518.518,0,0,1-.211.335.866.866,0,0,1-.577.23.745.745,0,0,1-.56-.219.868.868,0,0,1-.23-.577l0-.794a.754.754,0,0,1,.271-.545.6.6,0,0,1,.577-.23.745.745,0,0,1,.56.219.428.428,0,0,1,.149.27l3.2-.264a1.928,1.928,0,0,1,.6-.9,2.406,2.406,0,0,1,1.274-.48l.016-2.208c-.292.028-.568,0-.913.019l-1.247,1.169a2.482,2.482,0,0,1-2.158.793c-1.19-.005-2.5.012-3.809.029-1.243-.02-2.484-.04-3.847-.038a2.971,2.971,0,0,1-1.144-.162,3.342,3.342,0,0,1-1.052-.872,5.746,5.746,0,0,1-.469-.533c-.127-.15-.253-.3-.469-.533a.763.763,0,0,1-.164-.218.467.467,0,0,1,.106-.367c.067-.037.15-.126.218-.163.172-.007.359-.066.532-.073,1.415.013,3.053.035,4.639.041s3.173.013,4.812.035a2.273,2.273,0,0,0,1-.333,5.376,5.376,0,0,0,.833-.722c.88-.88,2.044-1.96,2.837-1.957a.5.5,0,0,1,.277.023l.033-11.848-.4,0a1.545,1.545,0,0,1-1.4-.634l-1.377-1.7c-.633-.75-.633-.75-1.546-.732L7.55,4.572c-.517.02-1.429.04-.805-.744l.827-.9A3.127,3.127,0,0,1,8.66,2.115,5.06,5.06,0,0,1,9.828,2' %3E%3C/path%3E%3Cpath d='M15.366,27.055l-.005.018-.041.007-.041.007-.018-.007-.082.015-.018-.007-.128.04-.028.03-.041.007-.016.054-.046.025-.018-.007-.016.054-.016.054-.016.054-.016.054-.016.054-.016.054-.016.054.022.123-.005.018-.01.035.022.123-.016.054.012.158-.016.054-.016.054.031.028.008.041-.016.054-.016.054.048.033-.01.035.038.069.043.051-.005.018.054.015.038.069.054.015c.028.051.092.068.173.07l.077,0,.082-.015a.45.45,0,0,0,.164-.03l.051-.044.018.007.016-.054.085-.092.016-.054.016-.054.016-.054.016-.054.016-.054.01-.035-.038-.069.031-.107-.017-.141.026-.089-.022-.123.016-.054.016-.054-.038-.069.016-.054.01-.035-.031-.028-.008-.041-.013-.023-.025-.046-.038-.069-.02-.064-.054-.015-.145-.1-.089-.026Z' style='fill:url(%23a)'%3E%3C/path%3E%3Cpolygon points='19.234 27.352 19.111 27.375 19.058 27.36 18.935 27.382 18.776 27.394 18.723 27.379 18.6 27.402 18.477 27.424 18.355 27.447 18.247 27.415 18.13 27.419 18.025 27.447 17.972 27.432 17.849 27.454 17.672 27.462 17.619 27.446 17.496 27.469 17.373 27.491 17.32 27.476 17.161 27.488 17.039 27.511 16.985 27.495 16.862 27.518 16.74 27.54 16.632 27.509 16.51 27.531 16.405 27.559 16.399 27.577 16.336 27.597 16.282 27.582 16.106 27.589 16.085 28.261 16.154 28.222 16.244 28.248 16.366 28.226 16.42 28.241 16.473 28.256 16.65 28.249 16.703 28.264 16.757 28.28 16.88 28.257 16.933 28.273 17.022 28.299 17.145 28.276 17.199 28.291 17.375 28.284 17.429 28.3 17.482 28.315 17.605 28.292 17.659 28.308 17.766 28.339 17.871 28.311 17.924 28.327 18.047 28.304 18.154 28.335 18.208 28.351 18.33 28.328 18.384 28.344 18.437 28.359 18.596 28.347 18.65 28.362 18.703 28.377 18.82 28.373 18.928 28.404 19.05 28.382 19.104 28.397 19.158 28.412 19.28 28.39 19.287 27.366 19.233 27.35 19.234 27.352' style='fill:url(%23b)'%3E%3C/polygon%3E%3Cpath d='M24.59,26.043a.777.777,0,0,1-.176.007c-.1-.03-.162-.047-.23-.007l-.054-.015-.054-.015-.335.019-.176.007-.176.007-.158.012-.337-.039-.353.014-.158.012-.176.007-.176.007-.367-.068L21.31,26l-.123.022-.054-.015-.064.02-.059,0a1.327,1.327,0,0,0-.3.088,1.161,1.161,0,0,0-.174.066l-.087.033a.406.406,0,0,0-.156.071l-.074.056-.11.045-.016.054c-.053-.015-.071.038-.138.076l-.044.084-.033.048-.09.11-.01.035a.967.967,0,0,0-.124.429l-.018,1.2A1.128,1.128,0,0,0,19.8,29l.007.041c.037.067.06.134.165.164l.079.061.084.044a.551.551,0,0,0,.15.082l.031.028.071.021.089.026c.1.03.215.006.319.034s.234.007.391.055l.005-.018.018.007.1-.009.054.015.158-.012.176-.007.176-.007.337.039.158-.012.176-.007.176-.007.171.011.158-.012.176-.007.337.039.335-.019.036.011h.194c.067-.037,0,0,.054.015l.1-.028c.106-.012.209,0,.317-.024a.942.942,0,0,0,.174-.066.936.936,0,0,0,.325-.119l.005-.018a.588.588,0,0,0,.143-.094l.005-.018L25.3,29.2l.023-.012.074-.056a1.072,1.072,0,0,0,.162-.224.881.881,0,0,0,.227-.515.344.344,0,0,0,.009-.23l0-1.006-.01-.1a.681.681,0,0,0-.108-.361.562.562,0,0,0-.229-.279,1.075,1.075,0,0,0-.183-.169L25,26.166l-.107-.031-.25-.073-.054-.015Z' style='fill:url(%23c)'%3E%3C/path%3E%3Cpath d='M23.876,7.715l-.335.019-.337-.04-.335.019-.176.007-.176.007-.278-.042-.281.035-.176.007-.23-.009-.028,2.432L21.53,16l.009.235,0,2.654-.01.636.077,0,.1-.009a.531.531,0,0,0,.235-.01,1.656,1.656,0,0,1,.26.037l.1-.009.077,0a.811.811,0,0,1,.176-.007c.12-.023.215,0,.335-.019.052.015.055.016.123-.022l.089.026a.824.824,0,0,0,.276-.017l.041-.007a2.009,2.009,0,0,1,.266.019,1.4,1.4,0,0,1,.141-.018l.036.011c.052.015.054.015.069-.038l.019-2.2-.014-2.889.007-2.961-.007-.176-.007-2.713,0-.794-.059,0,.005-.018Z' style='fill:url(%23d)'%3E%3C/path%3E%3Cpath d='M25.9,4.263a2.521,2.521,0,0,1-.283-.024l-.276.017-.572-.03h-.736l-.741.017-.687.033-.388,0H21.48L20.7,4.227l-.759.012-.051.043-.2-.116-.076-.138-.674-.815a2.164,2.164,0,0,0-.313-.323,1.118,1.118,0,0,0-.471-.311,2.133,2.133,0,0,0-.763-.105l-.123.022-.266-.019-.353.014-.779-.052h-.736l-.741.017h-.406l-.741.017-.388,0-.72-.054-.253,0-.153-.006L11,2.439l-.388,0-.353.014-.442-.012c-.119.022-.226-.025-.294.012-.135,0-.29,0-.388,0a1.279,1.279,0,0,0-.315.083l-.069.038a1.308,1.308,0,0,0-.2.078,1.45,1.45,0,0,0-.19.119l-.028.031a1.919,1.919,0,0,0-.385.392L7.1,4.136a2.047,2.047,0,0,1,.4.02L8.679,4.15l.353-.014h1.142l.741-.017.779.052.335-.019.794,0h1.142l.335-.019h.406l.725.036h.194l.207.021.565-.011c.07,0,.115-.007.176-.007.156-.007.272-.009.388,0a1.219,1.219,0,0,1,.686.238,3.355,3.355,0,0,1,.381.42,1.089,1.089,0,0,1,.209.215l.485.664.712.884.183.169a1.878,1.878,0,0,0,.209.215l.018.005a1.451,1.451,0,0,0,.326.211,1.558,1.558,0,0,0,.391.055.173.173,0,0,0,.158-.012l.225.026h.406l.725.036.335-.019.353-.014.388,0h1.142l.353-.014.388,0h.406l.266.019.054.016.1-.01a.319.319,0,0,0,.325-.254,3.266,3.266,0,0,0,.052-.779l.045-.955c0-.068-.005-.114-.007-.176-.013-.345,0-.562-.084-.644-.022-.12-.133-.155-.29-.2ZM23.874,7.7l.055.81,0-.794L23.874,7.7Z' style='fill:url(%23e)'%3E%3C/path%3E%3Cpath d='M23.876,23.365l-.005.018-.117,0-.054-.015-.117,0-.054-.015-.069.038-.161-.047-.005.018-.064.02-.089-.026-.069.038-.161-.047-.051.044-.018-.007-.107-.031-.069.038-.107-.031-.123.022-.036-.011-.123.022-.071-.021-.158.012-.054-.015c-.068.037-.071.038-.123.022l-.077,0a.258.258,0,0,1-.153,0l-.036-.011L21.6,23.4l-.041.007-.023.012-.023.613.021,1.129v.406l.054.015.054.015.158-.012.054.015.123-.022.054.015.176-.007.054.015.123-.022.054.015.158-.012.054.015.123-.022.054.015L23,25.587l.054.015.117,0,.054.015.158-.012.054.015.123-.022.054.015.176-.007.054.015.005-.018.064-.02,0-.794v-.135l.021-1.272-.054-.015Z' style='fill:url(%23f)'%3E%3C/path%3E%3Cpath d='M25.542,19.973a1.57,1.57,0,0,0-.237-.049l-.069.038a.5.5,0,0,0-.171-.011,2.583,2.583,0,0,0-.623.013c-.142,0-.276.008-.388,0a3.98,3.98,0,0,1-.46-.02,3.534,3.534,0,0,1-.388,0l-.1.009-.077,0-.117,0c-.1.009-.219.011-.353.014a3.682,3.682,0,0,0-.618,0,3.69,3.69,0,0,1-.388,0c-.113,0-.233-.007-.347,0l-.112-.014c-.068.037-.16.012-.228.05a.2.2,0,0,0-.176.007l-.146.035-.082.015-.151.053-.005.018a8.1,8.1,0,0,0-.763.5c-.117.108-.223.219-.346.326l-.046.025-.056.061c-.093.077-.192.15-.3.224-.083.089-.168.2-.259.293l-.08.074a1.176,1.176,0,0,1-.223.168c-.083.089-.1.127-.164.165l-.005.018a2.265,2.265,0,0,1-.672.58l-.016.054a5.191,5.191,0,0,1-.765.3,1.5,1.5,0,0,1-.2.037l-.041.007a.84.84,0,0,1-.171-.011l-.046.025-.023.012c-.1-.031-.216-.007-.373-.05a4.353,4.353,0,0,1-.593.041,4.292,4.292,0,0,0-.524,0c-.106,0-.215-.019-.324-.016-.219-.007-.439,0-.654-.014-.277-.024-.517.025-.794,0l-.041.007-.059,0c-.12,0-.241-.017-.36-.027-.293.029-.572.011-.863.04a.406.406,0,0,0-.23-.007c-.052-.015-.086-.043-.153,0-.14,0-.281-.008-.406,0a4.247,4.247,0,0,1-.442-.013c-.136,0-.273.01-.406,0a4.249,4.249,0,0,1-.442-.013c-.059.011-.131,0-.194,0s-.142,0-.212,0c-.292.028-.566-.007-.858.022a4.549,4.549,0,0,0-.848-.014c-.167,0-.333,0-.5-.009-.057,0-.114-.009-.171-.011l-.123.022c-.078.014-.15.036-.228.05l-.016.054a1.663,1.663,0,0,1,.387.4l.081.12a1.712,1.712,0,0,1,.188.152l.148.159.013.023a.3.3,0,0,0,.183.169,1.572,1.572,0,0,0,.29.336l.013.023.048.033a1.675,1.675,0,0,0,.407.331l.107.031.357.1c.113,0,.263,0,.406,0h.212l.094.009.135,0c.277.024.566.008.843.032l.141-.017c.088.009.178.011.266.019.278-.027.546-.01.822-.033l.041-.007a4.606,4.606,0,0,0,.848.014c.224.007.442.03.666.038.172-.006.34-.019.565-.01.146-.015.294-.008.429-.011.269-.022.53,0,.8-.02.057,0,.114.011.171.011a3.859,3.859,0,0,0,.7.008c.136,0,.273-.01.406,0s.253,0,.388,0c.12-.022.233.007.353-.014l.107.031c.292-.029.532-.081.772-.125l.023-.012.018.007c.084-.021.141-.033.21-.055a1.435,1.435,0,0,0,.156-.071l.046-.025a2.2,2.2,0,0,0,.241-.162l.1-.069.005-.018c.052-.047.108-.092.159-.148l.169-.183.182-.16.192-.2.387-.333.4-.387.174-.066.094.009.082-.015c.133.011.27,0,.406,0,.277.024.571-.01.848.014.239-.024.466,0,.7-.01l.158-.012a.17.17,0,0,0,.158-.012l.112.014.117,0c.128,0,.263,0,.406,0,.277.024.571-.009.848.014.292-.029.572-.011.863-.04.07,0,.137.019.207.022a1.918,1.918,0,0,0,.6-.059l.085-.092A1.285,1.285,0,0,0,26,22.063a2.921,2.921,0,0,1-.011-.565,2.092,2.092,0,0,1,.01-.636c-.008-.107-.02-.2-.035-.281a1.147,1.147,0,0,0-.063-.251l-.058-.133-.025-.046-.079-.061-.008-.041-.071-.021-.12-.054Z' style='fill:url(%23g)'%3E%3C/path%3E%3Cpath d='M28.993,27l-.117,0-.059,0-.028.03-.041.007-.01.035-.059,0-.016.054-.051.043-.01.035-.016.054-.016.054-.016.054-.016.054-.016.054-.016.054,0,.118-.005.018-.005.018L28.5,27.7l.008.041.015.082-.031.107.028.1-.016.054-.016.054.038.069-.016.054-.016.054.031.028.008.041.013.023.01.1.054.015.038.069.054.015.038.069.107.031.143.041c.058-.031.151-.063.22-.091l.041-.007.051-.043.033-.048.069-.038.005-.018.01-.035.016-.054.016-.054.016-.054.016-.054.01-.035-.038-.069.016-.054.016-.054-.007-.176.016-.054-.007-.176-.022-.123.016-.054.01-.035-.013-.023-.013-.023-.013-.023.016-.054-.018-.007-.02-.064-.018-.007-.056-.074a.055.055,0,0,1-.038-.069l-.107-.031-.054-.015a1.383,1.383,0,0,0-.161-.047Z' style='fill:url(%23h)'%3E%3C/path%3E%3Cpath d='M4.416,5.513H17.121a.2.2,0,0,1,.142.1l.074.135.012,13.449-.061.209-1,.9-1,.9-.068.037-.067.037L2.463,21.227c-.1-.031-.247-.129-.216-.234L2.219,7.6l.015-.053a.168.168,0,0,1,.082-.089L4.225,5.57a.29.29,0,0,1,.188-.059' style='fill:%23b3272c'%3E%3C/path%3E%3Cpolyline points='16.556 5.989 4.488 5.947 2.992 7.386 14.995 7.464 16.557 5.989' style='fill:%23f46d22'%3E%3C/polyline%3E%3Cpolyline points='16.854 6.287 15.343 7.778 15.355 15.948 15.328 20.536 15.96 19.924 16.876 19.112 16.854 6.288' style='fill:%23f46d22'%3E%3C/polyline%3E%3Cpolyline points='14.89 20.807 14.898 7.875 2.658 7.84 2.649 20.772 14.89 20.807' style='fill:%23f6e216'%3E%3C/polyline%3E%3Cpath d='M12.807,15.689l.662-.716-.018,4.363L4.209,19.32l.646-.664,7.944-.019,0-2.948ZM6.973,11.16l3.57.014.027.689L7,11.849l-.027-.689Zm5.819-1.091.032,3.015-7.932-.032-.7.649,9.3.031,0-4.311-.7.649Zm-5.8,6.713-.026.674,3.569.015.025-.674-3.569-.015' style='fill:%232e2a2b'%3E%3C/path%3E%3Cpath d='M12.807,10.036,4.875,10l.032,3.016-.7.649,0-4.311,9.3.031-.7.649Zm.014,5.62.662-.716-9.3-.031.034,4.377.646-.664.02-3,7.932.033' style='fill:%23ec771d'%3E%3C/path%3E%3Cpolygon points='27.982 27.59 27.976 27.608 27.912 27.628 27.859 27.613 27.752 27.582 27.647 27.609 27.593 27.594 27.54 27.579 27.417 27.601 27.363 27.586 27.256 27.555 27.251 27.572 27.187 27.592 27.133 27.577 27.026 27.546 26.909 27.55 26.855 27.535 26.766 27.509 26.761 27.527 26.697 27.547 26.643 27.531 26.536 27.5 26.467 27.538 26.413 27.523 26.36 27.508 26.306 27.493 26.301 27.51 26.237 27.53 26.216 28.202 26.226 28.302 26.224 28.378 26.277 28.394 26.4 28.371 26.454 28.387 26.577 28.364 26.612 28.375 26.735 28.352 26.853 28.348 26.906 28.363 27.029 28.341 27.082 28.356 27.205 28.334 27.259 28.349 27.381 28.327 27.435 28.342 27.486 28.299 27.54 28.314 27.663 28.292 27.716 28.307 27.839 28.285 27.892 28.3 27.898 28.282 27.962 28.262 28.015 28.278 28.069 28.293 28.074 28.275 28.138 28.255 28.191 28.27 28.196 27.652 28.143 27.637 28.089 27.621 27.982 27.59 27.982 27.59' style='fill:url(%23i)'%3E%3C/polygon%3E%3Cpath d='M12.807,10.036,4.875,10l.032,3.016-.7.649,0-4.311,9.3.031-.7.649Zm.014,5.62.662-.716-9.3-.031.034,4.377.646-.664.02-3,7.932.033' style='fill:%23ec771d'%3E%3C/path%3E%3Cpath d='M20.9,9.083l3.385-.719.1.03a.746.746,0,0,1,.591.115A.975.975,0,0,1,25.293,9l-.015.052a.329.329,0,0,1-.009.224c-.015.052.022.12-.046.157a.855.855,0,0,1-.683.6l-3.438.7-.052-.015a.773.773,0,0,1-.591-.115.965.965,0,0,1-.313-.488l-.038-.067a.329.329,0,0,0,.009-.224l.046-.157a.9.9,0,0,1,.736-.58Zm-.177,8.23,3.475-.637.068-.038a1.1,1.1,0,0,1,.575.167.529.529,0,0,1,.312.488l.037.067.007.173-.061.209a.984.984,0,0,1-.736.58l-3.422.652c-.067.037-.067.037-.12.021a.633.633,0,0,1-.523-.152.791.791,0,0,1-.38-.45l.03-.1a.2.2,0,0,1-.007-.172l.046-.157a1.013,1.013,0,0,1,.7-.648Zm.128-5.522a1.013,1.013,0,0,0-.7.649l-.046.157a.411.411,0,0,0-.008.225l-.015.052a.864.864,0,0,0,.365.5.666.666,0,0,0,.538.1l.052.015,3.438-.705a.983.983,0,0,0,.736-.581l.046-.157c.03-.1-.007-.172.009-.224l-.037-.067a.624.624,0,0,0-.312-.488.787.787,0,0,0-.59-.114l-.053-.015-3.422.652Zm-.063,2.761a1.07,1.07,0,0,0-.751.633l-.046.157a.2.2,0,0,1,.006.172l-.015.052.038.068a1.473,1.473,0,0,0,.313.487.773.773,0,0,0,.591.114l.052.015,3.49-.689a.921.921,0,0,0,.683-.6l.061-.209a.2.2,0,0,0-.007-.172l.015-.052a.727.727,0,0,0-.312-.488,1.122,1.122,0,0,0-.576-.167c-.067.037-.067.037-.119.022l-3.422.652' style='fill:%232e2a2b'%3E%3C/path%3E%3C/svg%3E");*/
            background-image: url("data:image/svg+xml,%0A%3Csvg fill='%23000' version='1.1' id='Ebene_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 64 64' enable-background='new 0 0 64 64' xml:space='preserve'%3E%3Cg%3E%3Cpath d='M17.172,24H12c-1.104,0-2,0.896-2,2s0.896,2,2,2h12V16c0-1.104-0.896-2-2-2s-2,0.896-2,2v5.172L3.414,4.586 c-0.78-0.781-2.048-0.781-2.828,0c-0.781,0.781-0.781,2.047,0,2.828L17.172,24z'/%3E%3Cpath d='M46.828,40H52c1.104,0,2-0.896,2-2s-0.896-2-2-2H40v12c0,1.104,0.896,2,2,2s2-0.896,2-2v-5.172l16.586,16.586 C60.976,59.805,61.488,60,62,60s1.024-0.195,1.414-0.586c0.781-0.781,0.781-2.047,0-2.828L46.828,40z'/%3E%3Cpath d='M2,60c0.512,0,1.024-0.195,1.414-0.586L20,42.828V48c0,1.104,0.896,2,2,2s2-0.896,2-2V36H12c-1.104,0-2,0.896-2,2 s0.896,2,2,2h5.172L0.586,56.586c-0.781,0.781-0.781,2.047,0,2.828C0.976,59.805,1.488,60,2,60z'/%3E%3Cpath d='M60.586,4.586L44,21.172V16c0-1.104-0.896-2-2-2s-2,0.896-2,2v12h12c1.104,0,2-0.896,2-2s-0.896-2-2-2h-5.172L63.414,7.414 c0.781-0.781,0.781-2.047,0-2.828C62.634,3.805,61.366,3.805,60.586,4.586z'/%3E%3C/g%3E%3C/svg%3E%0A");
            background-size: 20px 20px;
        }
        .btn-search {
            background-image: url("data:image/svg+xml,%0A%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.77 18.3C9.2807 18.3 7.82485 17.8584 6.58655 17.031C5.34825 16.2036 4.38311 15.0275 3.81318 13.6516C3.24325 12.2757 3.09413 10.7616 3.38468 9.30096C3.67523 7.84029 4.39239 6.49857 5.44548 5.44548C6.49857 4.39239 7.84029 3.67523 9.30096 3.38468C10.7616 3.09413 12.2757 3.24325 13.6516 3.81318C15.0275 4.38311 16.2036 5.34825 17.031 6.58655C17.8584 7.82485 18.3 9.2807 18.3 10.77C18.3 11.7588 18.1052 12.738 17.7268 13.6516C17.3484 14.5652 16.7937 15.3953 16.0945 16.0945C15.3953 16.7937 14.5652 17.3484 13.6516 17.7268C12.738 18.1052 11.7588 18.3 10.77 18.3ZM10.77 4.74999C9.58331 4.74999 8.42327 5.10189 7.43657 5.76118C6.44988 6.42046 5.68084 7.35754 5.22672 8.45389C4.77259 9.55025 4.65377 10.7566 4.88528 11.9205C5.11679 13.0844 5.68824 14.1535 6.52735 14.9926C7.36647 15.8317 8.43556 16.4032 9.59945 16.6347C10.7633 16.8662 11.9697 16.7474 13.0661 16.2933C14.1624 15.8391 15.0995 15.0701 15.7588 14.0834C16.4181 13.0967 16.77 11.9367 16.77 10.75C16.77 9.15869 16.1379 7.63257 15.0126 6.50735C13.8874 5.38213 12.3613 4.74999 10.77 4.74999Z' fill='%23666'/%3E%3Cpath d='M20 20.75C19.9015 20.7504 19.8038 20.7312 19.7128 20.6934C19.6218 20.6557 19.5392 20.6001 19.47 20.53L15.34 16.4C15.2075 16.2578 15.1354 16.0697 15.1388 15.8754C15.1422 15.6811 15.221 15.4958 15.3584 15.3583C15.4958 15.2209 15.6812 15.1422 15.8755 15.1388C16.0698 15.1354 16.2578 15.2075 16.4 15.34L20.53 19.47C20.6704 19.6106 20.7493 19.8012 20.7493 20C20.7493 20.1987 20.6704 20.3893 20.53 20.53C20.4608 20.6001 20.3782 20.6557 20.2872 20.6934C20.1962 20.7312 20.0985 20.7504 20 20.75Z' fill='%23666'/%3E%3C/svg%3E%0A");
            background-size: 28px 28px;
        }
        .new-folder:hover {

        }
        .logo {
            height: 32px;
            opacity: .5;
        }
        .view-icon, .icon-view {
            background-size: 22px 20px;
            /* background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='1 0 38 37'%3E%3Cpath d='M 8 5 L 16 5 Q 18 5 18 7 L 18 15 Q 18 17 16 17 L 8 17 Q 6 17 6 15 L 6 7 Q 6 5 8 5 Z M 28 5 L 32 5 Q 34 5 34 7 L 34%0A15 Q 34 17 32 17 L 23 17 Q 21 17 21 15 L 21 7 Q 21 5 23 5 Z M 8 20 L 16 20 Q 18 20 18 22 L 18 30 Q 18 32 16 32 L 8 32 Q 6 32 6 30 L%0A6 22 Q 6 20 8 20 Z M 24 20 L 32 20 Q 34 20 34 22 L 34 30 Q 34 32 32 32 L 23 32 Q 21 32 21 30 L 21 23 Q 21 20 23 20 Z' stroke='none'%0Astroke-width='0' fill='%23666'/%3E%3C/svg%3E");*/
                background-image: url("img/ui/view-icons.svg");
            background-position: center center;
        }
        .view-list, .list-view {
            background-image: url("img/ui/view-list.svg");
            background-size: 22px 22px;
            background-position: center center;
            
        }
        .view-column, .column-view {
            background-position: center center;
            background-size: 22px 22px;
            background-image: url("img/ui/view-columns.svg");
        }
        #search {
            font-size:24px;

        }
        #search::placeholder {
            color:#ccc;
            
        }
        .toolgroup {
            margin-left: 1rem;
            margin-right: 1rem;
            display:flex;
        }
        .toolgroup > button {
            border-radius: 0;
            margin: 0;
        }
        .toolgroup > button:first-child {
            border-top-left-radius: 0.5rem;
            border-bottom-left-radius: 0.5rem;
        }
        .toolgroup > button:last-child {
            border-top-right-radius: 0.5rem;
            border-bottom-right-radius: 0.5rem;
        }
        .selected {
            background-color:#fcfcfc;            
        }
        .buttongroup {
            display: flex;
            flex-direction: row;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" integrity="sha512-fD9DI5bZwQxOi7MhYWnnNPlvXdp/2Pj3XSTRrFs5FQa4mizyGLnJcN6tuvUS6LbmgN1ut+XGSABKvjN0H6Aoow==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
<header>
    <img class="logo" src="img/crlogo.svg">
    <div class="toolgroup">
        <input type="text" id="search" placeholder="Search Files..."> <button title="Search" class="btn btn-search"></button>
    </div>
    <div class="buttongroup">
        <div class="toolgroup">
            <button title="New Folder" class="btn new-folder"></button><button title="Compress File[s]" class="btn btn-compress"></button><button title="Copy" class="btn btn-copy"></button><button title="Paste" class="btn btn-paste"></button><button title="Upload" class="btn btn-upload"></button><button title="Download" class="btn btn-download"></button><button title="Delete" class="btn btn-trash"></button>
        </div>
        <div class="toolgroup">
            <button id="icon-view" title="Icon View" class="view-icon view selected"></button><button title="List View" id="list-view" class="view-list view"></button><button title="Column View" id="column-view" class="view-column view"></button>
        </div>
    </div>
</header>
<main>
<div id="left"></div>
<div id="handle">â€–</div>
<div id="right"></div>
</main>
<script>

(function() {
    const $ = str => document.querySelector(str);
    const $$ = str => document.querySelectorAll(str);
    const app = {
        config: {
            view: "icon-view"
        },
        data: {},
        state: {
            folders: {},
            loaded: false
        },
        init: function() {
            let hx = app.getConfig("handle");
            if (hx) {
                $("#handle").style.left = hx + 'vw';
                $("#left").style.width = (hx - 1) + 'vw';
                $("#right").style.left = (hx + 1) + 'vw';
                $("#right").style.width = (100 - hx) + 'vw';
            }
            $$(".toolgroup button").forEach(btn=>{
                btn.addEventListener("click", app.switchView);
            });

            $$(".view").forEach(el=>{
                el.addEventListener("click", app.changeView);
            });
            $("#left").addEventListener("click", app.doClick);
            $("#handle").addEventListener("mousedown", app.doDown);
            fetch("api?basepath=/home/cdr/domains/cdr2.com/www&x=list&f=/").then(r=>r.json()).then(data=>{
                app.data = data;
                app.renderFiles(data);
            });
            app.viewFiles("/");
            app.state.loaded = true;
        },
        loadItem(path) {
            app.viewFiles(path);
            let id = path.replace(/\W/g, '_');
            let el = $(`#${id}`);
            if (el) {
                el.closest("li").nextSibling.classList.toggle('open');
            }
        },
        switchView(evt) {
            let newview = evt.target.id;
            let m;
            if (m = evt.target.id.match(/(\w+)\-view/)) {
                app.config.view = m[1];
                $("#viewer").src = evt.target.id + '.html';
            }
            let cur = $(".toolgroup button").querySelector(".selected");
            cur.classList.remove("selected");
            evt.target.classList.add("selected");
        },
        storeConfig(key, val) {
            localStorage.set(key, JSON.stringify(val));
        },
        getConfig(key) {
            return JSON.parse(localStorage.getItem(key));
        },
        doClick(evt) {
            console.log("doClick");
            console.dir(evt);

            if (evt.target.dataset.folder==="true") {
                app.state.currentDirectory = evt.target.dataset.filename;
                app.viewFiles(evt.target.dataset.filename);
                let subtree = evt.target.closest("li").nextSibling;
                evt.target.closest("li").nextSibling?.classList.toggle('open');
                if (!app.state.folders[evt.target.dataset.filename]) {
                    fetch(`api?f=${evt.target.dataset.filename}`).then(r=>r.json()).then(data=>{
                        app.data.files.concat(data);
                        app.state.folders[evt.target.dataset.filename] = data;
                        app.renderFiles(data, evt.target); 
                    });
                }
            } else {
                if (evt.target && evt.target.dataset && evt.target.dataset.filename) {
                    app.viewFiles(evt.target.dataset.filename);
                }
            }
            evt.preventDefault();

            return false;
        },
        doDown(evt) {
            $("#viewer").style.display = "none";
            app.state.resizing = true;
            app.state.resizeX = evt.x;
            app.state.left = $("#left").getBoundingClientRect();
            app.state.right = $("#right").getBoundingClientRect();
            app.state.handle = $("#handle").getBoundingClientRect();
            $("body").classList.add("resizing");
            $("body").classList.add("noselect");

            document.addEventListener("mousemove", app.doMove);
            document.addEventListener("mouseup", app.doUp);

        },
        doMove(evt) {
            if (app.state.resizing) {
               let xper = (evt.x / window.innerWidth) * 100;
                $("#left").style.width = (xper - 1) + "vw";
                $("#right").style.width = (100 - xper) + "vw";
                $("#right").style.left = xper + "vw";
                $("#handle").style.left = (xper - 1) + "vw";
            }
        },
        doUp(evt) {
            $("#viewer").style.display = "block";
            app.state.resizing = false;
            app.storeConfig("handle", (evt.x / window.innerWidth) * 100);
            document.removeEventListener("mousemove", app.doMove);
            document.removeEventListener("mouseup", app.doUp);
            $("body").classList.remove("resizing");
            $("body").classList.remove("noselect");
        },
        viewFiles(folder) {
            let el = $("#viewer");
            if (!el) {
                el = document.createElement("iframe");
                el.id = "viewer";
                el.style.background = "#fff";
            }
            let ext = (app.config.view==="icon-view") ? ".php" : ".html";
            
            el.src = app.config.view + ext + "?d=" + folder;
            $("#right").append(el);
        },
        renderFiles(files, el) {
            console.dir(files);
            if (files.files) {
                files.files.sort((a,b)=>{
                    if (a.file.toLowerCase() < b.file.toLowerCase()) {
                        return -1;
                    } else if (a.file.toLowerCase() > b.file.toLowerCase()) {
                        return 1;
                    } else {
                        return 0;
                    }
                });
                let out = "<ul>";
                files.files.forEach((file)=>{
                    let isdir = (file.isdir) ? " folder" : "";
                    let clean = file.filename.replace(/^\//, '');
                    let path = file.filename.split(/\//);
                    let fn = path.pop();
                    let id = file.filename.replace(/\W/g, '_');
                    out += `<li><a id="${id}" href="${file.filename}" target="_blank" data-filename="${file.filename}" data-folder="${file.isdir}"><span class="icon"><img src="${file.icon}" class="icon${isdir}"></span> ${fn}</a></li>`;
                });
                out += "</ul>";
                let newel = document.createElement("li");
                newel.classList.add("open");
                newel.innerHTML = out;

                if (!el) {
                    $("#left").append(newel);
                } else {
                    el.parentNode.parentNode.insertBefore(newel, el.parentNode.nextSibling);
                }
            }

        },
        fetch: function(url, callback) {
            fetch(url).then(response=>response.json()).then(data=>{
                app.data = data;
                app.state.loaded = true;
                if (callback && typeof(callback) === "function") {
                    callback(data);
                }
            });
        },
        display: function(data, tgt) {
            let out = "<table><thead><tr>";
            const keys = Object.keys(data[0]);
            if (keys) {
                keys.forEach(key => {
                    out += `<th>${key}</th>`;
                });
            }
            out += "</tr></thead><tbody>";
            data.forEach(item=>{
                out += `<tr>`;
                keys.forEach(key => {
                    out += `<td>${item[i]}</td>`;
                });
                out += `</tr>`;
            });
            out += "</tbody></table>";

            if (tgt) {
                tgt.innerHTML = out;
            }
            return out;
        },
        data: {}
    }
    window.app = app;
    app.init();
})();
</script>
</body>

</html>
